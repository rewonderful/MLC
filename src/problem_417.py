#!/usr/bin/env python
# _*_ coding:utf-8 _*_
def pacificAtlantic( matrix):
    """
    Disscussion Method
    ç®—æ³•ï¼šBFS
    æ€è·¯ï¼š
        å…³é”®æ˜¯è¦æ‹†æˆä¸¤ä¸ªæ–¹å‘åŽ»æ‰¾ï¼åˆ†åˆ«æ‰¾åˆ°åŽæ±‚äº¤é›†ï¼
        ç›´æŽ¥æ±‚å¾—åŒæ—¶èƒ½åˆ°è¾¾ä¸¤ä¸ªæµ·æ´‹çš„æ¡ä»¶ä¸å¥½åšï¼
        æ›²çº¿æ•‘å›½ï¼Œæ›²çº¿æ€ç»´
        ------------------------------------------------------------------------------------------------
            é¦–å…ˆè¿˜æ˜¯è€ƒè™‘æš´åŠ›è§£æ³•çš„æ€ç»´ï¼Œå³å¯¹æ¯ä¸ªç‚¹ï¼Œéƒ½DFSçœ‹çœ‹èƒ½ä¸èƒ½ä»Žè¿™ä¸ªç‚¹å‡ºå‘åˆ°è¾¾å¦å¤–ä¸€ä¾§ï¼Œå¦‚æžœå¯ä»¥çš„è¯å°±addåˆ°ansä¸­
            è¿™å°±æ„å‘³ç€ä¼šå¥—å¥½å¤šå¥½å¤šforå¾ªçŽ¯ï¼Œå¯¹æ¯ä¸ªi,jéƒ½DFSä¸€éæ˜¾ç„¶æ˜¯éžå¸¸è€—æ—¶çš„ï¼å¹¶ä¸”å¯ä»¥æŽ¨æ•²å‡ºæ¥ï¼Œæœ¬é¢˜ä¸èƒ½ç”¨åŠ¨è§„DPåšï¼

            å°†æœ¬é¢˜æ‹†ä¸ºä¸¤ä¸ªæ–¹å‘æ¥çœ‹ï¼Œå³å¯¹ä¸¤ä¸ªæµ·æ´‹å…ˆåˆ†åˆ«åˆ¤æ–­å“ªäº›ä½ç½®å¯ä»¥æŠµè¾¾ï¼Œå°†åŒæ–¹å¯ä»¥æŠµè¾¾çš„ä½ç½®é›†åˆæ±‚äº¤é›†ä¸å°±æ˜¯é—®é¢˜çš„ç­”æ¡ˆå—ï¼
            è€Œæ±‚æŠµè¾¾æŸä¸€ä¸ªæµ·æ´‹çš„æ±‚è§£æ€è·¯åˆæ¯”è¾ƒæ˜Žç¡®ï¼å°±åƒ542é¢˜ä¸€æ ·ï¼Œ542ä¸­æˆ‘ä¸ä»Ž1å‡ºå‘ï¼Œä»Ž0å‡ºå‘ï¼Œè¿™é‡Œæˆ‘ä»Žå·²çŸ¥å¯è¾¾æµ·æ´‹çš„ä½ç½®å‡ºå‘ï¼Œ
        ç”¨BFSçœ‹å‘¨å›´çš„r,cä½ç½®ï¼Œå¦‚æžœç¬¦åˆæ¡ä»¶ï¼Œå°±å¯ä»¥ä¸€æ¬¡æ€§å°†å¤šä¸ªr,cä½ç½®æ›´æ–°ä¸ºå¯è¾¾çŠ¶æ€ï¼Œè€Œä¸æ˜¯æš´åŠ›çš„æ€æƒ³ä¸­ä¸€æ¬¡åªå…³æ³¨ä¸€ä¸ªä½ç½®ï¼
        å°†ç¬¦åˆæ¡ä»¶çš„rcæ·»åŠ åˆ°setä¸­æ¥ï¼Œè¦æ³¨æ„è¿™é‡Œè¦åŽ»é‡ï¼Œå¦‚æžœrcå·²ç»åœ¨setä¸­å°±ä¸è¦æ·»åŠ äº†ï¼Œå¹¶ä¸”ä¸è¦å…¥é˜Ÿåˆ—ï¼Œå¦åˆ™å·²ç»æ‰©å±•å¼€çš„rcå†
        æ‰©å±•ä¼šå›žåŽ»ï¼Œç­‰äºŽè¿›å…¥äº†æœ‰çŽ¯å›¾ï¼âš ï¸âš ï¸âš ï¸ðŸ’¥ðŸŒŸâš¡ï¸ðŸŒŸ
    å¤æ‚åº¦åˆ†æžï¼š
        æ—¶é—´ï¼šON2ï¼Ÿä¸å¤ªä¼šç®—
        ç©ºé—´ï¼šON2ï¼Œansç©ºé—´
    """
    ans = []
    if not matrix or not matrix[0]:
        return ans
    m = len(matrix)
    n = len(matrix[0])
    pacific_reachble = [(0, j) for j in range(n)] + [(i, 0) for i in range(m)]
    pacific_reachble = set(pacific_reachble)
    atlantic_reachble = [(m - 1, j) for j in range(n)] + [(i, n - 1) for i in range(m)]
    atlantic_reachble = set(atlantic_reachble)

    def bfs(ocean_reachble):
        queue = list(ocean_reachble)
        while queue:
            i, j = queue.pop(0)
            for r, c in [(i + 1, j), (i - 1, j), (i, j + 1), (i, j - 1)]:
                if r >= 0 and r <= len(matrix) - 1 and c >= 0 and c <= len(matrix[0]) - 1:
                    if matrix[r][c] >= matrix[i][j] and (r, c) not in ocean_reachble:
                        queue.append((r, c))
                        ocean_reachble.add((r, c))
        return ocean_reachble

    return list(bfs(pacific_reachble) & bfs(atlantic_reachble))




def pacificAtlantic1( matrix):
    """
    My Ridiculous Method
    åŽŸæ¥çš„æ€è·¯ï¼š
        æˆ‘åŽŸæ¥çš„æƒ³æ³•æ˜¯é¦–å…ˆçœ‹åˆ°äº†å·¦ä¸‹è§’å’Œå³ä¸Šè§’æ˜¯ä¸€å®šå¯è¾¾çš„ï¼Œç„¶åŽæƒ³åˆ°äº†è¿™æ˜¯"è¾¹ç•Œæ¡ä»¶"ï¼Œæ¯ä¸ªi,jä½ç½®è®¾ç½®[BOOL,BOOL]ä¸¤ä¸ªçŠ¶æ€å€¼
    è¡¨å¾å½“å‰ç‚¹èƒ½ä¸èƒ½åˆ°è¾¾[Pacific,Atlantic]ï¼Œåˆ©ç”¨542é¢˜çš„æ€è·¯ï¼Œä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ï¼Œ2ä¸ªæ–¹ä½ä¸€èµ·çš„éåŽ†ï¼Œâ†™ï¸ä¸€æ¬¡â†—ï¸ä¸€æ¬¡ã€‚å¹¶ä¸”æ¯ä¸ªä½
    ç½®çš„[Pacific,Atlantic,]å€¼æ˜¯æ¯”è¾ƒå®¹æ˜“è®¡ç®—çš„ï¼ŒçŸ©å½¢çš„å››å‘¨éƒ½æ˜¯ç‰¹æ®ŠçŠ¶æ€ç„¶åŽæƒ³ç”¨DPæ¥ç€ï¼ŒåŽæ¥å‘çŽ°DPä¼šç¼ºå°‘éåŽ†çš„æƒ…å†µï¼Œå¯¹æœ¬é¢˜çš„åˆ
    å§‹ç¤ºä¾‹æ¥è¯´ï¼Œå¦‚æžœç”¨"DP"ï¼Œé‚£ä¹ˆ1,4å°†æ°¸è¿œæ— æ³•æ·»åŠ åˆ°ansä¸­ï¼Œå› ä¸ºdpæ€»æ˜¯ä»Žä¸€å±‚å¾€å¤–æ‰©çš„ï¼Œå…¶åŸºäºŽçš„æ˜¯çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œè€Œæˆ‘ä¸€æ¬¡æ€§è¦åˆ¤æ–­å‡º
    ä¸¤ä¸ªBOOLçŠ¶æ€ï¼Œç”¨dpæ— æ³•åŒæ­¥ä¸¤ä¸ªçŠ¶æ€ï¼Œé™¤éžæˆ‘ç”¨ä¸¤æ¬¡æ–¹ä½ï¼Œæ¯æ¬¡éƒ½åªåˆ¤æ–­èƒ½å¦åˆ°è¾¾ä¸€ä¸ªæµ·æ´‹ï¼Œè¿™æ ·çš„è¯å…¶å®žå°±æ˜¯ä¸Šé¢çš„BFSæ–¹æ³•ï¼
        ä¸‹é¢çš„ä»£ç å°±æ¯”è¾ƒè¿·äº†ï¼Œæƒ³ç”¨é˜Ÿåˆ—çš„å½¢å¼è¿›è¡ŒBFSï¼Œå¹¶ä¸”ç›´æŽ¥åˆ¤æ–­æŸä¸ªä½ç½®r,cèƒ½å¦åˆ°è¾¾ä¸¤ä¸ªæµ·æ´‹ï¼Œå³é¢˜è§£
    """
    ans = []
    if matrix == []:
        return []
    reachble = [[[j == 0, i == len(matrix) - 1] for j in range(len(matrix[0]))] for i in range(len(matrix))]
    # [Pacific,Atlantic,]
    # ä»Žå³ä¸Šè§’å¼€å§‹BFS
    queue = [(len(matrix)-1, 0)]
    while queue:
        i, j = queue.pop(0)
        if reachble[i][j][0] and reachble[i][j][1]:
            ans.append([i, j])
        for r, c in [(i + 1, j), (i - 1, j), (i, j + 1), (i, j - 1)]:
            if r >= 0 and r <= len(matrix) - 1 and c >= 0 and c <= len(matrix[0]) - 1:
                if not reachble[r][c][0]:
                    if matrix[r][c] >= matrix[i][j]:
                        reachble[r][c][0] = reachble[i][j][0]
                if not reachble[r][c][1]:
                    if matrix[r][c] >= matrix[i][j]:
                        reachble[r][c][1] = reachble[i][j][1]
                if (reachble[r][c][0] or reachble[r][c][1]) and (r,c) not in reachble:
                    queue.append((r, c))
    return ans
if __name__ == '__main__':
    print(pacificAtlantic([[1,2,2,3,5],[3,2,3,4,4],[2,4,5,3,1],[6,7,1,4,5],[5,1,1,2,4]]))